    #INCLUDE p16f84.inc
    
    #DEFINE LED_GREEN PORTA,0
    #DEFINE LED_RED PORTA,1
    
BANK0 MACRO
    BCF STATUS,RP0
    ENDM
    
BANK1 MACRO 
    BSF STATUS,RP0
    ENDM
    
    ORG 0x00
    GOTO START
    
    ORG 0x04
    GOTO INTERRUPTOR
    
START ORG 0x05
    BANK1
    MOVLW 0xFC
    MOVWF TRISA
    MOVLW 0x01
    MOVWF TRISB
    MOVLW 0xB0
    MOVWF INTCON
    MOVLW  0xB0 ;B'01010000' ;c8
    MOVWF OPTION_REG
    BANK0
    MOVLW .246
    MOVWF TMR0
    BCF LED_RED
    BSF LED_GREEN
    GOTO LOOP
    
LOOP
    CALL AFFICHER
    CALL DELAY
    CALL ETEINDRE
    CALL DELAY
    GOTO LOOP
    
ETEINDRE
    CLRF PORTB
    RETURN
    
AFFICHER
    MOVF INDEX, 0
    ADDWF PCL, 1
    NOP
    RETLW 0x06
    RETLW 0x5B
    RETLW 0x4F
    RETLW 0x66
    RETLW 0x6D
    RETLW 0x7D
    
DELAY
    MOVLW .64
    MOVWF COMPT1
    MOVLW .64
    MOVWF COMPT2
    GOTO DELAY1
DELAY1
    DECFSZ COMPT1
    GOTO DELAY2
    RETURN
DELAY2
    DECFSZ COMPT2
    GOTO DELAY2
    GOTO DELAY1
    
INTERRUPTOR
    BTFSS INTCON,T0IF
    GOTO INT0_INTERRUPTION
    GOTO T0_INTERRUPTION
    
INT0_INTERRUPTION
    DECF TMR0
    BCF LED_RED
    BSF LED_GREEN
    BCF INTCON,INTF
    RETFIE
    
T0_INTERRUPTION
    BSF LED_RED
    BCF LED_GREEN
    BCF INTCON,T0IF
    RETFIE
