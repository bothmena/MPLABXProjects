    
    #include p16f84.inc
    
    #DEFINE BOUTON PORTA,0
COMPT1 EQU 0x0D
COMPT2 EQU 0x0E
    
BANK0 MACRO
    BCF STATUS,RP0
    ENDM
    
BANK1 MACRO
    BSF STATUS,RP0
    ENDM
    
    ORG 0x00
    GOTO START
    
START ORG 0x05
    BANK1
    MOVLW 0xFF
    MOVWF TRISA
    CLRF TRISB
    BANK0
    CLRF PORTA
    CLRF PORTB
    MOVLW 0x01
    MOVWF COMPT1

BOUCLE
    ;BTFSS BOUTON
    ;GOTO BOUCLE
    CALL AFFICHER
    MOVWF PORTB
    CALL INCREMENT
    ;CALL ATTENTE
    GOTO BOUCLE
    
ATTENTE
    MOVLW .190
    MOVWF COMPT2
DELAI
    DECFSZ COMPT2
    GOTO DELAI
    RETURN
    
;INCREMENT ==> premiere methode, tricky code! mais correcte
;    MOVLW 0x06
;    SUBLW COMPT1,0
;    BTFSC STATUS,Z
;    CLRF COMPT1
;    INCF COMPT1,1
;    RETURN
    
INCREMENT
    MOVLW 0x06
    SUBWF COMPT1,0
    BTFSS STATUS,Z
    GOTO CAS1
    GOTO CAS2
    
CAS1
    INCF COMPT1,1
    RETURN
    
CAS2
    MOVLW .1
    MOVWF COMPT1
    RETURN
    
AFFICHER
    MOVF COMPT1,0
    ADDWF PCL,1
    RETLW 0x06
    RETLW 0x5B
    RETLW 0x4F
    RETLW 0x66
    RETLW 0x6D
    RETLW 0x7D
    RETURN

    END
