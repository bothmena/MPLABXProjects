    #INCLUDE p16f84.inc
    
    #DEFINE LED PORTA,0
    
COMPT EQU 0x0E
    
BANK0 MACRO
    BCF STATUS,RP0
    ENDM
    
BANK1 MACRO 
    BSF STATUS,RP0
    ENDM
    
    ORG 0x00
    GOTO START
    
    ORG 0x04
    GOTO INTERRUPTOR
    
START ORG 0x05
    BANK1
    MOVLW 0xFE
    MOVWF TRISA
    MOVLW 0x00
    MOVWF TRISB
    MOVLW 0xA0
    MOVWF INTCON
    MOVLW  0xC8 ;B'11000100' ;c8
    MOVWF OPTION_REG
    BANK0
    MOVLW .131
    MOVWF TMR0
    MOVLW .125
    MOVWF COMPT
    BCF LED
    GOTO LOOP
    
LOOP
    GOTO LOOP
    
INTERRUPTOR
    MOVLW .131
    MOVWF TMR0
    BCF INTCON,2
    DECFSZ COMPT
    RETFIE
    BTFSS LED
    GOTO LED_ON
    GOTO LED_OFF
    
LED_ON
    BSF LED
    GOTO INIT_COMPT
    
LED_OFF
    BCF LED
    GOTO INIT_COMPT
    
INIT_COMPT
    MOVLW .125
    MOVWF COMPT
    RETFIE

    END
